import requests

# Set the API endpoint URL
api_url = "https://your-nexpose-instance.com/api/3"

# Set the API credentials
nexpose_username = "your_username"
nexpose_password = "your_password"

# Authenticate with the API using your credentials
auth_request = requests.post(api_url + "/authenticate", auth=(nexpose_username, nexpose_password))

# Get the session ID from the authentication response
session_id = auth_request.json()['token']

# Set the headers for API requests
headers = {"Authorization": f"Basic {session_id}"}

# Get the list of sites
site_list_request = requests.get(api_url + "/site/listing.jsp", headers=headers)

# Print the raw response content
print(site_list_request.content)
